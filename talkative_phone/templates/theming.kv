<Theming>
    name: 'theming'
    on_enter:
        app.main_widget.ids.toolbar.title = 'Настройки'
        app.main_widget.ids.toolbar.left_action_items = [['arrow-left', lambda x: app.show_screen('contacts')]] \
        if app.is_connected else app.main_widget.ids.toolbar.left_action_items

    on_leave:
        app.main_widget.ids.toolbar.left_action_items = [['menu', lambda x: app.root.toggle_nav_drawer()]]

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: dp(80)
        center_y: self.parent.center_y

        MDRaisedButton:
            size_hint: None, None
            size: 3 * dp(48), dp(48)
            center_x: self.parent.center_x
            text: 'Change theme'
            on_release: root.theme_picker_open()
            opposite_colors: True
            pos_hint: {'center_x': .5}
        MDLabel:
            text:
                "Current: " + app.theme_cls.theme_style + ", " + app.theme_cls.primary_palette
            theme_text_color: 'Primary'
            pos_hint: {'center_x': .5}
            halign: 'center'
